def afficherMessagePourcentageTaches(dateDuJour, tasksRealized, tasksPossible) {
    def pourcentageRealise = (tasksRealized / tasksPossible) * 100

    if (pourcentageRealise >= 100) {
        echo "Félicitations ! Vous avez accompli toutes vos tâches pour ce mois. Vous pouvez avancer sur le mois suivant."
    } else if (dateDuJour.toInteger() > 15) {
        echo "Attention: Nous sommes après le 15e jour du mois. Veuillez accélérer le rythme des tâches."
        if (pourcentageRealise < 50) {
            echo "Message: Vous êtes en retard et avez accompli moins de 50% de vos tâches. Il est temps d'accélérer."
        } else {
            echo "Message: Vous êtes en retard mais avez accompli plus de 50% de vos tâches. Continuez vos efforts."
        }
    } else {
        if (pourcentageRealise < 50) {
            echo "Message: Vous êtes dans les délais mais avez accompli moins de 50% de vos tâches. Améliorez votre rythme."
        } else {
            echo "Message: Vous êtes dans les délais et avez accompli plus de 50% de vos tâches. Continuez le bon travail."
        }
    }
}



pipeline {
    agent any
    parameters {
        choice(name: 'MOIS', choices: ['Janvier', 'Fevrier', 'Mars'], description: 'Choisissez le mois')
        choice(name: 'DATE_DU_JOUR', choices: ['1', '2', '3', '4', '5', '6', '7','8', '9', '10','11', '12','13', '14', '15', '16', '17', '18', '19','20', '21', '22','23', '24','25','26','27','28','29','30','31'], description: 'Quel est la date du jour ?')
    }
    stages {
        stage('US pour Janvier') {
            when {
                expression { params.MOIS == 'Janvier' }
            }
            steps {
                script {
                    def tasksPossible = 1  // Ajustez le nombre de tâches possibles pour Janvier selon vos besoins
                    def confirmJournal = input(message: 'US de Janvier: Avez-vous rédigé un journal intime?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseJournal')])
                    echo "Rédiger un journal intime: ${confirmJournal}"

                    // Ajoutez ici des interactions pour d'autres US de Janvier si nécessaire
                    def tasksRealized = confirmJournal ? 1 : 0
                 
                    afficherMessagePourcentageTaches(params.DATE_DU_JOUR, tasksRealized, tasksPossible)
                }
            }
        }

        stage('US pour Février') {
            when {
                expression { params.MOIS == 'Fevrier' }
            }
            steps {
                script {
                    def tasksPossible = 1  // Ajustez le nombre de tâches possibles pour Février selon vos besoins
                    def confirmEspace = input(message: 'US de Février: Avez-vous rendu votre espace plus agréable?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseEspace')])
                    echo "Rendre votre espace plus agréable: ${confirmEspace}"

                    // Ajoutez ici des interactions pour d'autres US de Février si nécessaire
                    def tasksRealized = confirmEspace ? 1 : 0
                    afficherMessagePourcentageTaches(params.DATE_DU_JOUR, tasksRealized, tasksPossible)
                }
            }
        }

        stage('US pour Mars') {
            when {
                expression { params.MOIS == 'Mars' }
            }
            steps {
                script {
                    def tasksPossible = 4  // Ajustez le nombre de tâches possibles pour Mars selon vos besoins
                    def confirmManger = input(message: 'US de Mars: Avez-vous bien mangé?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseManger')])
                    echo "Bien manger: ${confirmManger}"

                    def confirmExercice = input(message: 'US de Mars: Avez-vous fait de l\'exercice?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseExercice')])
                    echo "Faire de l'exercice: ${confirmExercice}"

                    def confirmFumer = input(message: 'US de Mars: Avez-vous arrêté de fumer?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseFumer')])
                    echo "Arrêter de fumer: ${confirmFumer}"

                    def confirmSoin = input(message: 'US de Mars: Avez-vous pris soin de vous?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseSoin')])
                    echo "Prendre soin de soi: ${confirmSoin}"

                    // Ajoutez ici des interactions pour d'autres US de Mars si nécessaire
                    def tasksRealized = (confirmManger ? 1 : 0) + (confirmExercice ? 1 : 0) + (confirmFumer ? 1 : 0) + (confirmSoin ? 1 : 0)
                    
                   afficherMessagePourcentageTaches(params.DATE_DU_JOUR, tasksRealized, tasksPossible)
                }
            }
        }
        stage('US pour Mai') {
            when {
                expression { params.MOIS == 'Mai' }
            }
            steps {
                script {
                    def tasksPossible = 4  // Ajustez le nombre de tâches possibles pour Mai selon vos besoins
                    def confirmVoyage = input(message: 'US de Mai: Avez-vous effectué le voyage?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseVoyage')])
                    echo "Effectuer le voyage: ${confirmVoyage}"

                    def confirmCrocheter = input(message: 'US de Mai: Avez-vous crocheter quelque chose?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseCrocheter')])
                    echo "Crocheter quelque chose: ${confirmCrocheter}"

                    def confirmSalsa = input(message: 'US de Mai: Avez-vous dansé la salsa?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseSalsa')])
                    echo "Danser la salsa: ${confirmSalsa}"

                    def confirmMarathon = input(message: 'US de Mai: Avez-vous participé à un marathon?', ok: 'Confirmer', parameters: [booleanParam(defaultValue: false, description: 'Cochez si réalisé', name: 'RealiseMarathon')])
                    echo "Participer à un marathon: ${confirmMarathon}"

                    // Ajoutez ici des interactions pour d'autres US de Mai si nécessaire
                    def tasksRealized = (confirmVoyage ? 1 : 0) + (confirmCrocheter ? 1 : 0) + (confirmSalsa ? 1 : 0) + (confirmMarathon ? 1 : 0)
                    
                   afficherMessagePourcentageTaches(params.DATE_DU_JOUR, tasksRealized, tasksPossible)
                }
            }
        }
        // Ajoutez des stages similaires pour les autres mois si nécessaire
    
    }
}
